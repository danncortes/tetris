(()=>{"use strict";var e,t,n,o={362:(e,t,n)=>{n.d(t,{A:()=>l});var o=n(601),r=n.n(o),i=n(314),a=n.n(i)()(r());a.push([e.id,"@import url(https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap);"]),a.push([e.id,"html {\n    color: white;\n    font-family: 'Press Start 2P', sans-serif;\n    font-size: 20px;\n}\n\nbody {\n    padding: 40px;\n    background-color: #222;\n}\n\n.info-block {\n    border: 2px solid rgba(255, 255, 255, 0.2);\n    padding: 10px;\n    margin-bottom: 20px;\n}\n\n.info-block .title {\n    font-size: 0.8rem;\n    margin-bottom: 20px;\n}\n\n.info-block .content {\n    font-size: 1.2rem;\n}\n\n.info-block--piece .content {\n    display: grid;\n    grid-template-columns: repeat(4, 20px);\n    grid-template-rows: repeat(2, 20px);\n    grid-gap: 3px;\n}\n\n.left-lines {\n    font-size: 0.7rem;\n    color: rgba(255, 255, 255, 0.6);\n}\n\n.center-panel {\n    margin: 0 20px;\n    text-align: center;\n    position: relative;\n}\n\n.info-block p {\n    margin: 0;\n}\n\n.tetris-cont {\n    justify-content: center;\n    display: flex;\n}\n\n.tetris-wall {\n    border: 2px solid black;\n    display: grid;\n    grid-template-columns: repeat(10, 30px);\n    grid-template-rows: repeat(20, 30px);\n    grid-gap: 3px;\n    background-color: rgba(0, 0, 0, 0.1);\n}\n\n.tetris-wall--game-over .brick {\n    opacity: 0.2;\n}\n\n.game-over {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    font-size: 2rem;\n    color: red;\n    z-index: 1;\n}\n",""]);const l=a},13:(e,t,n)=>{var o=n(540),r=n(338),i=n(72),a=n.n(i),l=n(825),s=n.n(l),c=n(659),d=n.n(c),p=n(56),u=n.n(p),m=n(159),f=n.n(m),v=n(113),w=n.n(v),g=n(362),b={};b.styleTagTransform=w(),b.setAttributes=u(),b.insert=d().bind(null,"head"),b.domAPI=s(),b.insertStyleElement=f(),a()(g.A,b),g.A&&g.A.locals&&g.A.locals;const h=[{name:"i",position:[[0,3],[0,4],[0,5],[0,6]],color:"DeepSkyBlue"},{name:"o",position:[[0,4],[0,5],[1,4],[1,5]],color:"Gold"},{name:"j",position:[[0,3],[1,3],[1,4],[1,5]],color:"RoyalBlue"},{name:"l",position:[[0,6],[1,4],[1,5],[1,6]],color:"DarkOrange"},{name:"s",position:[[0,4],[0,5],[1,3],[1,4]],color:"GreenYellow"},{name:"z",position:[[0,3],[0,4],[1,4],[1,5]],color:"Crimson"},{name:"t",position:[[0,4],[1,3],[1,4],[1,5]],color:"MediumOrchid"}],y={i:[[[-1,2],[0,1],[1,0],[2,-1]],[[2,-2],[1,-1],[0,0],[-1,1]],[[-2,1],[-1,0],[0,-1],[1,-2]],[[1,-1],[0,0],[-1,1],[-2,2]]],o:[[[0,0],[0,0],[0,0],[0,0]],[[0,0],[0,0],[0,0],[0,0]],[[0,0],[0,0],[0,0],[0,0]],[[0,0],[0,0],[0,0],[0,0]]],j:[[[0,1],[-1,2],[0,0],[1,-1]],[[1,-1],[1,-1],[0,1],[0,1]],[[-1,1],[0,0],[1,-2],[0,-1]],[[0,-1],[0,-1],[-1,1],[-1,1]]],l:[[[0,-1],[0,1],[1,0],[1,0]],[[1,-1],[0,0],[-1,1],[0,-2]],[[-1,0],[-1,0],[0,-1],[0,1]],[[0,2],[1,-1],[0,0],[-1,1]]],s:[[[0,0],[1,-1],[0,2],[1,1]],[[1,0],[0,1],[1,-2],[0,-1]],[[-1,-1],[0,-2],[-1,1],[0,0]],[[0,1],[-1,2],[0,-1],[-1,0]]],z:[[[0,2],[1,0],[0,1],[1,-1]],[[1,-2],[0,0],[1,-1],[0,1]],[[-1,1],[0,-1],[-1,0],[0,-2]],[[0,-1],[-1,1],[0,0],[-1,2]]],t:[[[0,0],[0,1],[0,1],[1,-1]],[[1,-1],[0,0],[0,0],[0,0]],[[-1,1],[0,-1],[0,-1],[0,0]],[[0,0],[0,0],[0,0],[-1,1]]]};function E(e,t){return{...e[Math.ceil(Math.random()*t)-1],orientation:3}}const k=function({wall:e,className:t}){return o.createElement("div",{className:t},e.flat().map(((e,t)=>o.createElement("div",{key:t,className:"brick",style:{backgroundColor:e?e.color:"transparent"}}))))},x={1:40,2:100,3:300,4:1200},N=o.lazy((()=>n.e(659).then(n.bind(n,40)))),P=({onGeneralStateChanges:e})=>{const t=new Array(20).fill(new Array(10).fill(null)),[n,r]=(0,o.useState)(0),[i,a]=(0,o.useState)(1),[l,s]=(0,o.useState)(0),[c,d]=(0,o.useState)(!1),p=(0,o.useRef)(c),[u,m]=(0,o.useState)(t),f=(0,o.useRef)(u),v=h.length,[w,g]=(0,o.useState)(E(h,v)),[b,P]=(0,o.useState)(),S=(0,o.useRef)(b);(0,o.useEffect)((()=>(window.addEventListener("keydown",F),()=>{window.removeEventListener("keydown",F)}))),(0,o.useEffect)((()=>{_(w,u)?j():d(!0)}),[w]),(0,o.useEffect)((()=>{f.current=u}),[u]),(0,o.useEffect)((()=>{S.current=b,a(Math.floor(n/10)+1),b&&e({completedLines:n,level:i,score:l,nextPiece:{position:b.position,color:b.color}})}),[b]),(0,o.useEffect)((()=>{p.current=c}),[c]),(0,o.useEffect)((()=>{A(w)}),[]);const A=e=>{g({...e}),P(E(h,v));const t=setInterval((async()=>{p.current?clearInterval(t):await L("down")||(O(),await T(),clearInterval(t),A(S.current))}),1e3*Math.pow(.8,i-1));return()=>clearInterval(t)},O=()=>{m((e=>e.map((e=>e.map((e=>e?{...e,isFixed:!0}:null))))))},j=()=>{m(function(e,t){const n=e.map((e=>e.map((e=>e&&!e.isFixed?null:e))));return t.position.forEach((e=>{n[e[0]][e[1]]={color:t.color,isFixed:!1}})),n}(u,w))},F=e=>{const{code:t}=e,n={ArrowDown:"down",ArrowRight:"right",ArrowLeft:"left"};if("ArrowUp"===t)C();else{const e=n[t];e&&L(e)}},C=()=>{if(w){const{position:e,orientation:t}=function(e,t){const{name:n,position:o,orientation:r}=e,i=[];let a=3===r?0:r+1;const l=y[n][a];for(let e in Object.keys(o))i.push([o[e][0]+l[e][0],o[e][1]+l[e][1]]);return i.some((e=>{var n;return void 0===t[e[0]]||void 0===t[e[0]][e[1]]||(null===(n=t[e[0]][e[1]])||void 0===n?void 0:n.isFixed)}))?{position:o,orientation:r}:{position:i,orientation:a}}(w,u);g({...w,position:e,orientation:t})}},L=e=>new Promise((t=>{let n;g((o=>(n=(({direction:e,position:t,wall:n})=>{const o={right:{validateNewPosition(e){var t;return void 0===n[e[0]][e[1]+1]||(null===(t=n[e[0]][e[1]+1])||void 0===t?void 0:t.isFixed)},mapNewPosition:e=>[e[0],e[1]+1]},left:{validateNewPosition(e){var t;return void 0===n[e[0]][e[1]-1]||(null===(t=n[e[0]][e[1]-1])||void 0===t?void 0:t.isFixed)},mapNewPosition:e=>[e[0],e[1]-1]},down:{validateNewPosition(e){var t;return void 0===n[e[0]+1]||void 0===n[e[0]+1][e[1]]||(null===(t=n[e[0]+1][e[1]])||void 0===t?void 0:t.isFixed)},mapNewPosition:e=>[e[0]+1,e[1]]}};return!t.some(o[e].validateNewPosition)&&t.map(o[e].mapNewPosition)})({direction:e,position:o.position,wall:f.current}),"boolean"!=typeof n?(t(!0),{...o,position:n}):(t(!1),o))))})),T=async()=>{let e=await new Promise((e=>{m((t=>{let n=0;const o=[];return t.forEach((e=>{e.every((e=>null==e?void 0:e.isFixed))?(o.unshift(new Array(10).fill(null)),n++):o.push(e)})),e(n),o}))}));e&&s((t=>t+x[e])),r((t=>t+e))},_=(e,t)=>e.position.every((e=>{var n;return!(null===(n=t[e[0]][e[1]])||void 0===n?void 0:n.isFixed)}));return o.createElement(o.Fragment,null,c&&o.createElement(N,{onRestart:()=>{m(t),r(0),a(1),s(0),d(!1),A(E(h,v))}}),o.createElement(k,{wall:u,className:"tetris-wall"+(c?" tetris-wall--game-over":"")}))},S=document.getElementById("root");(0,r.H)(S).render(o.createElement((()=>{const[e,t]=(0,o.useState)(),[n,r]=(0,o.useState)(new Array(2).fill(new Array(4).fill(null)));(0,o.useEffect)((()=>{const t=n.map((e=>e.map((()=>null)))),o=null==e?void 0:e.nextPiece;o&&o.position.forEach((e=>{t[e[0]][e[1]-3]={color:o.color,isFixed:!1}})),r(t)}),[e]),(0,o.useEffect)((()=>{const e=e=>{"ArrowDown"!==e.key&&"ArrowUp"!==e.key||e.preventDefault()};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}}),[]);const{score:i,completedLines:a,nextPiece:l,level:s}=e||{};return o.createElement("div",{className:"tetris-cont"},o.createElement("div",{className:"left-panel"},o.createElement("div",{className:"info-block"},o.createElement("p",{className:"title"},"Score"),o.createElement("p",{className:"content"},i)),o.createElement("div",{className:"info-block"},o.createElement("p",{className:"title"},"Lines"),o.createElement("p",{className:"content"},a))),o.createElement("div",{className:"center-panel"},o.createElement(P,{onGeneralStateChanges:n=>{t({...e,...n})}})),o.createElement("div",{className:"right-panel"},o.createElement("div",{className:"info-block"},o.createElement("p",{className:"title"},"Level"),o.createElement("p",{className:"content"},s)),o.createElement("div",{className:"info-block info-block--piece"},o.createElement("p",{className:"title"},"Next"),o.createElement(k,{wall:n,className:"content"}))))}),null))}},r={};function i(e){var t=r[e];if(void 0!==t)return t.exports;var n=r[e]={id:e,exports:{}};return o[e](n,n.exports,i),n.exports}i.m=o,e=[],i.O=(t,n,o,r)=>{if(!n){var a=1/0;for(d=0;d<e.length;d++){for(var[n,o,r]=e[d],l=!0,s=0;s<n.length;s++)(!1&r||a>=r)&&Object.keys(i.O).every((e=>i.O[e](n[s])))?n.splice(s--,1):(l=!1,r<a&&(a=r));if(l){e.splice(d--,1);var c=o();void 0!==c&&(t=c)}}return t}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[n,o,r]},i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.f={},i.e=e=>Promise.all(Object.keys(i.f).reduce(((t,n)=>(i.f[n](e,t),t)),[])),i.u=e=>e+".bundle.js",i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),t={},n="base-react-ts-webpack:",i.l=(e,o,r,a)=>{if(t[e])t[e].push(o);else{var l,s;if(void 0!==r)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var p=c[d];if(p.getAttribute("src")==e||p.getAttribute("data-webpack")==n+r){l=p;break}}l||(s=!0,(l=document.createElement("script")).charset="utf-8",l.timeout=120,i.nc&&l.setAttribute("nonce",i.nc),l.setAttribute("data-webpack",n+r),l.src=e),t[e]=[o];var u=(n,o)=>{l.onerror=l.onload=null,clearTimeout(m);var r=t[e];if(delete t[e],l.parentNode&&l.parentNode.removeChild(l),r&&r.forEach((e=>e(o))),n)return n(o)},m=setTimeout(u.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=u.bind(null,l.onerror),l.onload=u.bind(null,l.onload),s&&document.head.appendChild(l)}},i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;i.g.importScripts&&(e=i.g.location+"");var t=i.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");if(n.length)for(var o=n.length-1;o>-1&&(!e||!/^http(s?):/.test(e));)e=n[o--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=e})(),(()=>{var e={792:0};i.f.j=(t,n)=>{var o=i.o(e,t)?e[t]:void 0;if(0!==o)if(o)n.push(o[2]);else{var r=new Promise(((n,r)=>o=e[t]=[n,r]));n.push(o[2]=r);var a=i.p+i.u(t),l=new Error;i.l(a,(n=>{if(i.o(e,t)&&(0!==(o=e[t])&&(e[t]=void 0),o)){var r=n&&("load"===n.type?"missing":n.type),a=n&&n.target&&n.target.src;l.message="Loading chunk "+t+" failed.\n("+r+": "+a+")",l.name="ChunkLoadError",l.type=r,l.request=a,o[1](l)}}),"chunk-"+t,t)}},i.O.j=t=>0===e[t];var t=(t,n)=>{var o,r,[a,l,s]=n,c=0;if(a.some((t=>0!==e[t]))){for(o in l)i.o(l,o)&&(i.m[o]=l[o]);if(s)var d=s(i)}for(t&&t(n);c<a.length;c++)r=a[c],i.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return i.O(d)},n=self.webpackChunkbase_react_ts_webpack=self.webpackChunkbase_react_ts_webpack||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),i.nc=void 0;var a=i.O(void 0,[121],(()=>i(13)));a=i.O(a)})();